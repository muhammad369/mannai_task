<div class="container mx-auto p-4 max-w-4xl">
  <!-- Header -->
  <div class="mb-6">
    <h1 class="text-2xl md:text-3xl font-bold">
      {{ isEditMode() ? 'Edit User' : 'Create New User' }}
    </h1>
    <p class=" mt-1">
      {{ isEditMode() ? 'Update user information' : 'Add a new user to the system' }}
    </p>
  </div>

  <!-- Form Card -->
  <p-card>
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="space-y-6">
      <!-- First Name & Last Name -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label for="firstName" class="block text-sm font-medium mb-2"> First Name * </label>
          <input
            pInputText
            id="firstName"
            formControlName="firstName"
            placeholder="Enter first name"
            class="w-full"
            [class]="{ 'p-invalid': isFieldInvalid('firstName') }"
          />
          @if (isFieldInvalid('firstName')) {
          <small class="p-error block mt-1">
            {{ getFieldError('firstName') }}
          </small>
          }
        </div>

        <div>
          <label for="lastName" class="block text-sm font-medium mb-2"> Last Name * </label>
          <input
            pInputText
            id="lastName"
            formControlName="lastName"
            placeholder="Enter last name"
            class="w-full"
            [class]="{ 'p-invalid': isFieldInvalid('lastName') }"
          />
          @if (isFieldInvalid('lastName')) {
          <small class="p-error block mt-1">
            {{ getFieldError('lastName') }}
          </small>
          }
        </div>
      </div>

      <!-- Email -->
      <div>
        <label for="email" class="block text-sm font-medium mb-2"> Email Address * </label>
        <input
          pInputText
          id="email"
          type="email"
          formControlName="email"
          placeholder="Enter email address"
          class="w-full"
          [class]="{ 'p-invalid': isFieldInvalid('email') }"
        />
        @if (isFieldInvalid('email')) {
        <small class="p-error block mt-1">
          {{ getFieldError('email') }}
        </small>
        }
      </div>

      <!-- Phone & Age -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label for="phone" class="block text-sm font-medium mb-2"> Phone Number </label>
          <input
            pInputText
            id="phone"
            formControlName="phone"
            placeholder="Enter phone number"
            class="w-full"
            [class]="{ 'p-invalid': isFieldInvalid('phone') }"
          />
          @if (isFieldInvalid('phone')) {
          <small class="p-error block mt-1">
            {{ getFieldError('phone') }}
          </small>
          }
        </div>

        <div>
          <label for="age" class="block text-sm font-medium mb-2"> Age </label>
          <p-inputNumber
            id="age"
            formControlName="age"
            placeholder="Enter age"
            mode="decimal"
            [min]="1"
            [max]="120"
            class="w-full"
            [class]="{ 'p-invalid': isFieldInvalid('age') }"
          ></p-inputNumber>
          @if (isFieldInvalid('age')) {
          <small class="p-error block mt-1">
            {{ getFieldError('age') }}
          </small>
          }
        </div>
      </div>

      <!-- Gender -->
      <div>
        <label for="gender" class="block text-sm font-medium mb-2"> Gender </label>
        <p-select
          id="gender"
          formControlName="gender"
          [options]="genderOptions"
          optionLabel="label"
          optionValue="value"
          dataKey="value"
          placeholder="Select gender"
          class="w-full"
          [class]="{ 'p-invalid': isFieldInvalid('gender') }"
        >
        </p-select>
        @if (isFieldInvalid('gender')) {
        <small class="p-error block mt-1">
          {{ getFieldError('gender') }}
        </small>
        }
      </div>

      <!-- Form Actions -->
      <div
        class="flex flex-col-reverse md:flex-row gap-3 justify-end pt-4 border-t border-gray-200"
      >
        <button
          pButton
          type="button"
          label="Cancel"
          class="p-button-outlined p-button-secondary"
          (click)="onCancel()"
          [disabled]="loading()"
        ></button>

        <button
          pButton
          type="submit"
          [label]="isEditMode() ? 'Update User' : 'Create User'"
          class="p-button-primary"
          [disabled]="userForm.invalid || loading()"
        >
          @if (loading()) {
          <p-progressSpinner styleClass="w-4 h-4 mr-2" strokeWidth="4"></p-progressSpinner>
          }
        </button>
      </div>
    </form>
  </p-card>
</div>

<p-toast position="top-right"></p-toast>
